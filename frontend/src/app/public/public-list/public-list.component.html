<div class="public-snippets-container">
    <header class="public-header">
      <div class="header-top">
        <a routerLink="/dashboard" class="btn btn-secondary">‚Üê Volver al Dashboard</a>
        <div>
          <h1>üåê Snippets P√∫blicos</h1>
          <p class="subtitle">Descubre c√≥digo compartido por la comunidad</p>
        </div>
      </div>
    </header>
  
    <!-- Filtros y b√∫squeda -->
    <div class="filters-section">
      <div class="search-box">
        <input 
          type="text" 
          [(ngModel)]="searchQuery"
          (keyup.enter)="onSearch()"
          placeholder="Buscar por t√≠tulo o descripci√≥n..."
          class="search-input"
        />
        <button (click)="onSearch()" class="btn btn-secondary">üîç Buscar</button>
      </div>
  
      <div class="filters">
        <select 
          [(ngModel)]="selectedLanguage" 
          (change)="onFilterChange()"
          class="filter-select"
        >
          <option value="">Todos los lenguajes</option>
          <option *ngFor="let lang of languages" [value]="lang">{{ lang }}</option>
        </select>
      </div>
    </div>
  
    <!-- Mensaje de error -->
    <div class="error-message" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>
  
    <!-- Estado de carga -->
    <div class="loading" *ngIf="isLoading">
      <p>Cargando snippets p√∫blicos...</p>
    </div>
  
    <!-- Lista de snippets -->
    <div class="snippets-grid" *ngIf="!isLoading && snippets.length > 0">
      <div class="snippet-card" *ngFor="let snippet of snippets" [routerLink]="['/public', snippet.id]">
        <div class="snippet-header">
          <h3>{{ snippet.title }}</h3>
          <div class="snippet-badges">
            <span class="badge badge-language">{{ snippet.language }}</span>
          </div>
        </div>
  
        <p class="snippet-description" *ngIf="snippet.description">
          {{ snippet.description }}
        </p>
  
        <div class="snippet-meta">
          <span class="snippet-date">
            {{ snippet.updated_at | date:'short' }}
          </span>
        </div>
  
        <div class="snippet-code-preview">
          <pre><code>{{ snippet.code.substring(0, 150) }}{{ snippet.code.length > 150 ? '...' : '' }}</code></pre>
        </div>
      </div>
    </div>
  
    <!-- Mensaje cuando no hay snippets -->
    <div class="empty-state" *ngIf="!isLoading && snippets.length === 0">
      <p>No hay snippets p√∫blicos disponibles.</p>
    </div>
  
    <!-- Paginaci√≥n -->
    <div class="pagination" *ngIf="!isLoading && totalPages > 1">
      <button 
        (click)="onPageChange(currentPage - 1)"
        [disabled]="currentPage === 1"
        class="btn btn-secondary"
      >
        ‚Üê Anterior
      </button>
      
      <div class="page-numbers">
        <button 
          *ngFor="let page of pages"
          (click)="onPageChange(page)"
          [class.active]="page === currentPage"
          class="btn-page"
        >
          {{ page }}
        </button>
      </div>
      
      <button 
        (click)="onPageChange(currentPage + 1)"
        [disabled]="!hasNext"
        class="btn btn-secondary"
      >
        Siguiente ‚Üí
      </button>
    </div>
  
    <div class="pagination-info" *ngIf="!isLoading && total > 0">
      Mostrando {{ showingRange }}
    </div>
  </div>