<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="header-content">
      <h1>SnipHub Dashboard</h1>
      <p class="welcome-text" *ngIf="user">Bienvenido, <strong>{{ user.username }}</strong></p>
    </div>
    <div class="header-actions">
      <button 
        (click)="toggleTheme()" 
        class="btn btn-theme-toggle"
        [title]="isDarkTheme ? 'Cambiar a tema claro' : 'Cambiar a tema oscuro'"
      >
        {{ isDarkTheme ? 'â˜€ï¸' : 'ğŸŒ™' }}
      </button>
      <button class="btn btn-secondary" (click)="logout()">Cerrar sesiÃ³n</button>
    </div>
  </header>

  <main class="dashboard-content">
    <!-- EstadÃ­sticas -->
    <section class="stats-section">
      <h2>ğŸ“Š EstadÃ­sticas</h2>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">ğŸ“</div>
          <div class="stat-info">
            <div class="stat-value">{{ totalSnippets }}</div>
            <div class="stat-label">Total Snippets</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">â­</div>
          <div class="stat-info">
            <div class="stat-value">{{ favoriteSnippets }}</div>
            <div class="stat-label">Favoritos</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸŒ</div>
          <div class="stat-info">
            <div class="stat-value">{{ publicSnippets }}</div>
            <div class="stat-label">PÃºblicos</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ”’</div>
          <div class="stat-info">
            <div class="stat-value">{{ totalSnippets - publicSnippets }}</div>
            <div class="stat-label">Privados</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Accesos rÃ¡pidos -->
    <section class="quick-actions-section">
      <h2>âš¡ Accesos RÃ¡pidos</h2>
      <div class="actions-grid">
        <a routerLink="/snippets/new" class="action-card action-primary">
          <div class="action-icon">â•</div>
          <h3>Nuevo Snippet</h3>
          <p>Crea un nuevo snippet de cÃ³digo</p>
        </a>
        <a routerLink="/snippets" class="action-card">
          <div class="action-icon">ğŸ“‹</div>
          <h3>Mis Snippets</h3>
          <p>Ver todos tus snippets</p>
        </a>
        <a routerLink="/snippets" [queryParams]="{is_favorite: true}" class="action-card">
          <div class="action-icon">â­</div>
          <h3>Favoritos</h3>
          <p>Ver snippets favoritos</p>
        </a>
      </div>
    </section>

    <!-- Snippets recientes -->
    <section class="recent-section">
      <div class="section-header">
        <h2>ğŸ•’ Snippets Recientes</h2>
        <a routerLink="/snippets" class="view-all-link">Ver todos â†’</a>
      </div>
      
      <div class="loading" *ngIf="isLoading">
        <p>Cargando...</p>
      </div>

      <div class="recent-snippets-grid" *ngIf="!isLoading && recentSnippets.length > 0">
        <div class="recent-snippet-card" *ngFor="let snippet of recentSnippets" [routerLink]="['/snippets', snippet.id]">
          <div class="snippet-header-mini">
            <h3>{{ snippet.title }}</h3>
            <div class="snippet-badges">
              <span class="badge badge-language">{{ snippet.language }}</span>
              <span class="badge badge-favorite" *ngIf="snippet.is_favorite">â­</span>
              <span class="badge badge-public" *ngIf="snippet.is_public">ğŸŒ</span>
            </div>
          </div>
          <p class="snippet-description-mini" *ngIf="snippet.description">
            {{ snippet.description.length > 100 ? (snippet.description | slice:0:100) + '...' : snippet.description }}
          </p>
          <div class="snippet-code-preview">
            <code>{{ snippet.code.substring(0, 80) }}{{ snippet.code.length > 80 ? '...' : '' }}</code>
          </div>
          <div class="snippet-footer">
            <span class="snippet-date">{{ snippet.updated_at | date:'short' }}</span>
          </div>
        </div>
      </div>

      <div class="empty-state" *ngIf="!isLoading && recentSnippets.length === 0">
        <p>No tienes snippets aÃºn.</p>
        <a routerLink="/snippets/new" class="btn btn-primary">Crear tu primer snippet</a>
      </div>
    </section>
  </main>
</div>